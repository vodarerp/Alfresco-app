<Window x:Class="Alfresco.App.Windows.DocumentSelectionWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        mc:Ignorable="d"
        Title="Select Documents for Migration"
        Height="600" Width="900"
        WindowStartupLocation="CenterOwner"
        Loaded="Window_Loaded">
    <Grid Margin="10">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Header -->
        <Border Grid.Row="0" Background="#2C3E50" Padding="15" Margin="0,0,0,15">
            <StackPanel>
                <TextBlock Text="Document Selection for Migration"
                           Foreground="White" FontSize="18" FontWeight="Bold"/>
                <TextBlock Text="Select one or more document types to search for migration (by ecm:docDesc field)"
                           Foreground="#ECF0F1" FontSize="12" Margin="0,5,0,0"/>
            </StackPanel>
        </Border>

        <!-- Search Box -->
        <Border Grid.Row="1" Background="#ECF0F1" Padding="10" Margin="0,0,0,10">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>
                <TextBlock Grid.Column="0" Text="Search:"
                           FontSize="12" VerticalAlignment="Center" Margin="0,0,10,0"/>
                <TextBox Grid.Column="1"
                         x:Name="txtSearch"
                         FontSize="12" Padding="5"
                         TextChanged="txtSearch_TextChanged"
                         ToolTip="Search by document name or code"/>
            </Grid>
        </Border>

        <!-- Document List -->
        <Border Grid.Row="2" BorderBrush="#BDC3C7" BorderThickness="1" Background="White">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                </Grid.RowDefinitions>

                <!-- Column Headers -->
                <Border Grid.Row="0" Background="#34495E" Padding="10,8">
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="40"/>
                            <ColumnDefinition Width="80"/>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="150"/>
                            <ColumnDefinition Width="100"/>
                        </Grid.ColumnDefinitions>
                        <CheckBox Grid.Column="0"
                                  x:Name="chkSelectAll"
                                  VerticalAlignment="Center"
                                  Checked="chkSelectAll_Checked"
                                  Unchecked="chkSelectAll_Unchecked"
                                  ToolTip="Select/Deselect All"/>
                        <TextBlock Grid.Column="1" Text="Code"
                                   Foreground="White" FontWeight="SemiBold" FontSize="12"/>
                        <TextBlock Grid.Column="2" Text="Document Name"
                                   Foreground="White" FontWeight="SemiBold" FontSize="12"/>
                        <TextBlock Grid.Column="3" Text="Tip Dosijea"
                                   Foreground="White" FontWeight="SemiBold" FontSize="12"/>
                        <TextBlock Grid.Column="4" Text="Count"
                                   Foreground="White" FontWeight="SemiBold" FontSize="12"/>
                    </Grid>
                </Border>

                <!-- Scrollable List -->
                <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto">
                    <ItemsControl x:Name="lstDocuments">
                        <ItemsControl.ItemTemplate>
                            <DataTemplate>
                                <Border BorderBrush="#E0E0E0" BorderThickness="0,0,0,1"
                                        Background="White" Padding="10,8">
                                    <Border.Style>
                                        <Style TargetType="Border">
                                            <Style.Triggers>
                                                <Trigger Property="IsMouseOver" Value="True">
                                                    <Setter Property="Background" Value="#F5F5F5"/>
                                                </Trigger>
                                            </Style.Triggers>
                                        </Style>
                                    </Border.Style>
                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="40"/>
                                            <ColumnDefinition Width="80"/>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="150"/>
                                            <ColumnDefinition Width="100"/>
                                        </Grid.ColumnDefinitions>

                                        <CheckBox Grid.Column="0"
                                                  IsChecked="{Binding IsSelected, Mode=TwoWay}"
                                                  VerticalAlignment="Center"
                                                  Checked="DocumentCheckBox_Changed"
                                                  Unchecked="DocumentCheckBox_Changed"/>

                                        <TextBlock Grid.Column="1"
                                                   Text="{Binding SifraDokumenta}"
                                                   FontSize="11" VerticalAlignment="Center"
                                                   FontFamily="Consolas"/>

                                        <StackPanel Grid.Column="2" VerticalAlignment="Center">
                                            <TextBlock Text="{Binding Naziv}"
                                                       FontSize="12" FontWeight="SemiBold"/>
                                            <TextBlock Text="{Binding NazivDokumenta}"
                                                       FontSize="10" Foreground="#7F8C8D"
                                                       Margin="0,2,0,0"/>
                                        </StackPanel>

                                        <TextBlock Grid.Column="3"
                                                   Text="{Binding TipDosijea}"
                                                   FontSize="11" VerticalAlignment="Center"
                                                   HorizontalAlignment="Center"
                                                   Foreground="#2C3E50"/>

                                        <TextBlock Grid.Column="4"
                                                   Text="{Binding BrojDokumenata}"
                                                   FontSize="11" VerticalAlignment="Center"
                                                   HorizontalAlignment="Center"
                                                   Foreground="#3498DB"/>
                                    </Grid>
                                </Border>
                            </DataTemplate>
                        </ItemsControl.ItemTemplate>
                    </ItemsControl>
                </ScrollViewer>
            </Grid>
        </Border>

        <!-- Footer with paging, buttons and selection count -->
        <Border Grid.Row="3" Background="#ECF0F1" Padding="15" Margin="0,15,0,0">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>

                <!-- Paging Info and Controls -->
                <Grid Grid.Row="0" Margin="0,0,0,10">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>

                    <TextBlock Grid.Column="0"
                               x:Name="txtPagingInfo"
                               Text="Showing 0 of 0 documents"
                               FontSize="11"
                               VerticalAlignment="Center"
                               Foreground="#7F8C8D"/>

                    <StackPanel Grid.Column="1" Orientation="Horizontal">
                        <Button x:Name="btnPrevPage"
                                Content="◀ Previous"
                                Click="btnPrevPage_Click"
                                Padding="10,5" Margin="0,0,5,0"
                                Background="#3498DB" Foreground="White"
                                BorderThickness="0"
                                FontSize="11"/>
                        <Button x:Name="btnNextPage"
                                Content="Next ▶"
                                Click="btnNextPage_Click"
                                Padding="10,5"
                                Background="#3498DB" Foreground="White"
                                BorderThickness="0"
                                FontSize="11"/>
                    </StackPanel>
                </Grid>

                <!-- Selection Count and Action Buttons -->
                <Grid Grid.Row="1">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>

                    <!-- Selection Count -->
                    <TextBlock Grid.Column="0"
                               x:Name="txtSelectionCount"
                               Text="No documents selected"
                               FontSize="12" FontWeight="SemiBold"
                               VerticalAlignment="Center"
                               Foreground="#2C3E50"/>

                    <!-- Action Buttons -->
                    <StackPanel Grid.Column="1" Orientation="Horizontal">
                        <Button x:Name="btnOk" Content="OK"
                                Click="btnOk_Click"
                                Padding="20,8" Margin="0,0,10,0"
                                Background="#27AE60" Foreground="White"
                                FontWeight="SemiBold"
                                BorderThickness="0"
                                IsEnabled="False"/>
                        <Button x:Name="btnCancel" Content="Cancel"
                                Click="btnCancel_Click"
                                Padding="20,8"
                                Background="#95A5A6" Foreground="White"
                                FontWeight="SemiBold"
                                BorderThickness="0"/>
                    </StackPanel>
                </Grid>
            </Grid>
        </Border>
    </Grid>
</Window>
