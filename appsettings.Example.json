{
  // =====================================================================================
  // EXAMPLE CONFIGURATION FILE FOR ALFRESCO MIGRATION
  // =====================================================================================
  // Copy this to appsettings.Development.json or appsettings.Production.json
  // and update with actual values when external APIs become available.
  //
  // IMPORTANT: Do NOT commit real API keys to source control!
  // Use User Secrets or Azure Key Vault for production credentials.
  // =====================================================================================

  "Logging": {
    "LogLevel": {
      "Default": "Information",
      "Microsoft.AspNetCore": "Warning",
      "Migration": "Debug",
      "DbLogger": "Information",
      "FileLogger": "Debug"
    }
  },

  "AllowedHosts": "*",

  // =====================================================================================
  // EXTERNAL API CONFIGURATIONS
  // =====================================================================================

  // ClientAPI Configuration
  // Per documentation: Required for enriching folder/document metadata with client data
  // Used by: ClientEnrichmentService, DocumentDiscoveryService, FolderDiscoveryService
  "ClientApi": {
    // Base URL for ClientAPI service
    "BaseUrl": "https://client-api.your-bank.com",

    // API Endpoints (relative to BaseUrl)
    "GetClientDataEndpoint": "/api/v1/clients",
    "GetActiveAccountsEndpoint": "/api/v1/clients",
    "ValidateClientEndpoint": "/api/v1/clients",

    // Timeout configuration (in seconds)
    "TimeoutSeconds": 30,

    // API Authentication
    // IMPORTANT: Use User Secrets or Key Vault for production!
    "ApiKey": "your-client-api-key-here",

    // Retry configuration for transient failures
    "RetryCount": 3,
    "RetryDelayMilliseconds": 1000,

    // Enable/disable caching of client data
    "EnableCaching": true,
    "CacheDurationMinutes": 60
  },

  // DUT API Configuration
  // Per documentation: Required for validating deposit documents (only "Booked" status)
  // Used by: FolderDiscoveryService (for deposit folders), DocumentDiscoveryService
  "DutApi": {
    // Base URL for DUT (Deposit Understanding/Processing) API
    "BaseUrl": "https://dut-api.your-bank.com",

    // API Endpoints (relative to BaseUrl)
    "GetOffersEndpoint": "/api/v1/offers",
    "GetOfferDetailsEndpoint": "/api/v1/offers",
    "GetOfferDocumentsEndpoint": "/api/v1/offers",

    // Timeout configuration (in seconds)
    "TimeoutSeconds": 30,

    // API Authentication
    // IMPORTANT: Use User Secrets or Key Vault for production!
    "ApiKey": "your-dut-api-key-here",

    // Retry configuration
    "RetryCount": 3,
    "RetryDelayMilliseconds": 1000,

    // Caching configuration
    "EnableCaching": true,
    "CacheDurationMinutes": 60,

    // Query parameters for filtering offers
    "DefaultStatusFilter": "Booked",
    "MaxOffersPerRequest": 100
  },

  // =====================================================================================
  // ALFRESCO API CONFIGURATIONS (EXISTING)
  // =====================================================================================

  "AlfrescoRead": {
    "BaseUrl": "https://old-alfresco.your-bank.com",
    "ApiVersion": "1",
    "TimeoutSeconds": 60,
    "MaxRetries": 3,
    "Username": "migration-user",
    "Password": "your-password-here"
  },

  "AlfrescoWrite": {
    "BaseUrl": "https://new-alfresco.your-bank.com",
    "ApiVersion": "1",
    "TimeoutSeconds": 60,
    "MaxRetries": 3,
    "Username": "migration-user",
    "Password": "your-password-here"
  },

  // =====================================================================================
  // MIGRATION SERVICE CONFIGURATIONS
  // =====================================================================================

  "MigrationOptions": {
    // =====================================================================================
    // MIGRATION TYPE SELECTION
    // =====================================================================================
    // If true, uses MigrationByDocument mode (DocumentSearchService)
    // which searches documents directly by ecm:docType.
    // If false (default), uses MigrationByFolder mode (FolderDiscovery + DocumentDiscovery)
    "MigrationByDocument": false,

    // Configuration for DocumentSearchService (used when MigrationByDocument = true)
    "DocumentTypeDiscovery": {
      // List of document type codes to search for (ecm:docType values)
      // Example: ["00099", "00824", "00125"]
      "DocTypes": [ "00099", "00824", "00825", "00827" ],

      // List of folder types (DOSSIER-{type}) to search within
      // Example: ["PI", "LE", "D"]
      // Each type corresponds to DOSSIERS-PI, DOSSIERS-LE, DOSSIERS-D folders
      "FolderTypes": [ "PI", "LE", "D" ],

      // Number of documents to process in each batch
      "BatchSize": 100,

      // Maximum degree of parallelism for processing
      "MaxDegreeOfParallelism": 5,

      // Delay between batches in milliseconds (0 = no delay)
      "DelayBetweenBatchesInMs": 0,

      // Date filtering on ecm:docCreationDate
      "UseDateFilter": false,
      "DateFrom": "2024-01-01",
      "DateTo": "2024-12-31"
    },

    // Batch processing settings
    "FolderBatchSize": 100,
    "DocumentBatchSize": 50,
    "MaxParallelism": 4,

    // Checkpoint/resume settings
    "EnableCheckpointing": true,
    "CheckpointIntervalMinutes": 5,

    // Source system identifiers
    // Per documentation line 116: Track which system documents came from
    "Sources": {
      "Heimdall": "Heimdall",
      "Dut": "DUT",
      "OldDms": "Depo kartoni_Validan",
      "OldAlfresco": "OLD_ALFRESCO"
    },

    // Product type codes
    // Per documentation line 148: 00008 for FL deposits, 00010 for PL deposits
    "ProductTypes": {
      "FlDeposit": "00008",
      "PlDeposit": "00010"
    },

    // Document type mappings for transformation
    // Per documentation: Documents with "nova verzija" policy need migration suffix
    // IMPORTANT: Update this based on final business mapping table!
    "DocumentTypeMappings": {
      "00824": "00099", // KDP FL: migracija -> final
      "00825": "00101", // KDP authorized persons FL
      "00827": "00100", // KDP PL
      "00841": "00130"  // KYC questionnaire
    },

    // KDP Document Types (Kartica Deponovanog Potpisa)
    // Per documentation line 41-72: Special handling for signature cards
    "KdpDocumentTypes": [
      "00099", // KDP FL (final)
      "00824", // KDP FL (migration)
      "00101", // KDP authorized FL (final)
      "00825", // KDP authorized FL (migration)
      "00100", // KDP PL (final)
      "00827"  // KDP PL (migration)
    ],

    // Document versioning
    // Per documentation line 168-170: Unsigned = 1.1, Signed = 1.2
    "DocumentVersions": {
      "UnsignedVersion": "1.1",
      "SignedVersion": "1.2"
    },

    // Folder structure settings
    "FolderSettings": {
      // Root folder IDs in new Alfresco
      "FlClientRootFolderId": "workspace://SpacesStore/fl-clients-root",
      "PlClientRootFolderId": "workspace://SpacesStore/pl-clients-root",
      "DepositRootFolderId": "workspace://SpacesStore/deposits-root",

      // Per documentation line 156-163: Unique identifier formats
      "DepositIdentifierFormat": "DE-{CoreId}-{ProductType}-{ContractNumber}_{Timestamp}",
      "DepositReferenceFormat": "DE-{CoreId}{ProductType}-{ContractNumber}",

      // Enable/disable unique identifier generation for deposits
      "EnableUniqueIdentifiers": true
    },

    // Activity status determination
    // Per documentation line 51-72: Complex rules for KDP documents
    "ActivityStatusSettings": {
      "EnableActivityStatusDetermination": true,
      "DefaultIsActive": true,

      // KDP-specific settings
      "KdpSettings": {
        "KeepOnlyLatestActive": true,
        "CompareByOriginalCreatedDate": true,
        "RequireAccountValidation": true
      }
    },

    // Client data enrichment
    "EnrichmentSettings": {
      "EnableClientEnrichment": true,
      "EnrichFolders": true,
      "EnrichDocuments": true,
      "EnrichAccountNumbers": true, // For KDP documents

      // Behavior on enrichment failure
      "FailOnEnrichmentError": false, // Continue even if ClientAPI fails
      "LogEnrichmentErrors": true
    },

    // Document type transformation
    "TransformationSettings": {
      "EnableTypeTransformation": true,
      "AddMigrationSuffix": true, // Add "-migracija" suffix per documentation
      "TransformAfterMigration": true, // Run post-migration transformation
      "TransformInactiveDocuments": false // Only transform active documents
    }
  },

  // =====================================================================================
  // DATABASE CONFIGURATIONS
  // =====================================================================================

  // =====================================================================================
  // LOGGING CONFIGURATIONS
  // =====================================================================================

  "Serilog": {
    "Using": [ "Serilog.Sinks.Console", "Serilog.Sinks.File" ],
    "MinimumLevel": {
      "Default": "Information",
      "Override": {
        "Microsoft": "Warning",
        "System": "Warning",
        "Migration": "Debug"
      }
    },
    "WriteTo": [
      {
        "Name": "Console",
        "Args": {
          "outputTemplate": "[{Timestamp:HH:mm:ss} {Level:u3}] {Message:lj} {Properties:j}{NewLine}{Exception}"
        }
      },
      {
        "Name": "File",
        "Args": {
          "path": "Logs/migration-.log",
          "rollingInterval": "Day",
          "retainedFileCountLimit": 30,
          "outputTemplate": "[{Timestamp:yyyy-MM-dd HH:mm:ss.fff zzz}] [{Level:u3}] [{SourceContext}] {Message:lj} {Properties:j}{NewLine}{Exception}"
        }
      },
      {
        "Name": "File",
        "Args": {
          "path": "Logs/errors-.log",
          "rollingInterval": "Day",
          "restrictedToMinimumLevel": "Error",
          "retainedFileCountLimit": 90
        }
      },
    ],
    "Enrich": [ "FromLogContext", "WithMachineName", "WithThreadId" ]
  },

  // =====================================================================================
  // PERFORMANCE AND MONITORING
  // =====================================================================================

  "PerformanceSettings": {
    // HTTP client settings
    "HttpClientTimeoutSeconds": 30,
    "HttpClientMaxConnectionsPerServer": 10,

    // Parallel processing limits
    "MaxDegreeOfParallelism": 4,
    "MaxConcurrentApiCalls": 10,

    // Memory management
    "EnableMemoryThrottling": true,
    "MemoryThresholdMB": 1024,

    // Progress reporting
    "ProgressReportIntervalSeconds": 30
  },

  // Monitoring and health checks
  "HealthChecks": {
    "EnableHealthChecks": true,
    "HealthCheckIntervalSeconds": 60,
    "Checks": {
      "OldAlfresco": true,
      "NewAlfresco": true,
      "ClientApi": true,
      "DutApi": true
    }
  },

  // =====================================================================================
  // POST-MIGRATION SETTINGS
  // =====================================================================================

  "PostMigrationSettings": {
    // Document type transformation settings
    "TypeTransformation": {
      "Enabled": true,
      "ProcessBatchSize": 100,
      "MaxParallelism": 2,
      "ValidateBeforeTransform": true
    },

    // Account number enrichment for KDP documents
    "AccountEnrichment": {
      "Enabled": true,
      "ProcessBatchSize": 50,
      "RetryFailedDocuments": true,
      "MaxRetries": 3
    },

    // Validation and reporting
    "Validation": {
      "ValidateAllDocuments": true,
      "ValidateAllFolders": true,
      "GenerateReport": true,
      "ReportOutputPath": "Reports/post-migration-report.html"
    }
  }
}
